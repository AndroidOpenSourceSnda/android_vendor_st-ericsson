
OMX_SetConfig my_sink_VPB2 IFM_IndexParamFakesinkPathname contentURI=RAMDISK_PATH_VIDEO_HR
OMX_SetConfig my_sink_VPB2 IFM_IndexConfigIqtCaptureMode nSaveMode=VIDEO_SAVE_MODE bSaveFrameCount=VIDEO_SAVE_FRAME_COUNT nSaveFirstFrame=VIDEO_SAVE_FIRST_FRAME bSaveFrameByFrame=SAVING_FRAME_BY_FRAME nFrameSkippingNumber=0 nInstanceNumber=FAKESINK_VIDEO_INSTANCE_3 nAcknowledge=OMX_FALSE
OMX_SetConfig my_sink_VPB2 OMX_IndexConfigCaptureMode bContinuous=0 bFrameLimited=0 nFrameLimit=0
OMX_SetConfig my_sink_VPB0 IFM_IndexParamFakesinkPathname contentURI=RAMDISK_PATH_VIDEO_LR

if VIDEO_DISPLAY_ACTIVATION == OMX_TRUE
	OMX_SetConfig my_sink_VPB0 IFM_IndexConfigIqtCaptureMode nSaveMode=NORMAL_SAVE_MODE bSaveFrameCount=VIDEO_SAVE_FRAME_COUNT nSaveFirstFrame=VIDEO_SAVE_FIRST_FRAME bSaveFrameByFrame=SAVING_FRAME_BY_FRAME nFrameSkippingNumber=VIDEO_FRAME_SKIPPING_NUMBER nInstanceNumber=FAKESINK_VF_INSTANCE_0 nAcknowledge=OMX_FALSE
	OMX_SetConfig my_sink_VPB0 OMX_IndexConfigCapturing bEnabled=VIDEO_DISPLAY_ACTIVATION

	if VIDEO_SAVE_ACTIVATION == OMX_TRUE
		OMX_SetConfig my_sink_VPB2 OMX_IndexConfigCapturing bEnabled=VIDEO_SAVE_RESOLUTION_HR
	else
		OMX_SetConfig my_sink_VPB2 OMX_IndexConfigCapturing bEnabled=VIDEO_SAVE_ACTIVATION
	endif

else
	
	OMX_SetConfig my_sink_VPB0 IFM_IndexConfigIqtCaptureMode nSaveMode=VIDEO_SAVE_MODE bSaveFrameCount=VIDEO_SAVE_FRAME_COUNT nSaveFirstFrame=VIDEO_SAVE_FIRST_FRAME bSaveFrameByFrame=SAVING_FRAME_BY_FRAME nFrameSkippingNumber=0 nInstanceNumber=FAKESINK_VF_INSTANCE_0 nAcknowledge=OMX_FALSE
	if VIDEO_SAVE_ACTIVATION == OMX_TRUE
		OMX_SetConfig my_sink_VPB0 OMX_IndexConfigCapturing bEnabled=VIDEO_SAVE_RESOLUTION_LR
		OMX_SetConfig my_sink_VPB2 OMX_IndexConfigCapturing bEnabled=VIDEO_SAVE_RESOLUTION_HR
	else
		OMX_SetConfig my_sink_VPB0 OMX_IndexConfigCapturing bEnabled=VIDEO_SAVE_ACTIVATION
		OMX_SetConfig my_sink_VPB2 OMX_IndexConfigCapturing bEnabled=VIDEO_SAVE_ACTIVATION
	endif
endif

do $(IMG_SCRIPT)/unitary/features/cam_start_record.ite

echo File_saved


