<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.5.2" />
<title>Assemble Tool CLI(1)</title>
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #dddddd;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}


@media print {
  div#footer-badges { display: none; }
}

div#toc {
  margin-bottom: 2.5em;
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock-content {
  white-space: pre;
}
div.verseblock-attribution {
  padding-top: 0.75em;
  text-align: left;
}

div.exampleblock-content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }
</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){asciidoc.footnotes();}
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  var cont = document.getElementById("content");
  var noteholder = document.getElementById("footnotes");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      // Use [\s\S] in place of . so multi-line matches work.
      // Because JavaScript has no s (dotall) regex flag.
      note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      spans[i].innerHTML =
        "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
        "' title='View footnote' class='footnote'>" + n + "</a>]";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
}

}
/*]]>*/
</script>
</head>
<body>
<div id="header">
<h1>Assemble Tool CLI(1)</h1>
</div>
<div id="content">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph"><p>Assemble Tool CLI - required to assemble the software used by ST-Ericsson(tm) HW.</p></div>
</div>
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>assemble-tool</strong> [options] -t &lt;output type&gt; -c &lt;configuration file&gt; -l &lt;file list&gt; &lt;output file&gt;</p></div>
</div>
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p>It is necessary to assemble the software in the correct format to be able to
flash it to the mobile equipment. This is a requirement regardless of whether
it is loaders, app or acc SW, or flash archives.</p></div>
<div class="paragraph"><p>The assemble tool supports also ADL boot. It means that the loader is stored at the ADL location, so the TOC could contain the ADL item.
It is based on the customer requirement that it should not be necessary to download a loader to communicate with the Mobile Equipment.
The solution is then to make the loader already present in Mobile Equipment persistent storage.
This can be done by having the loader included in the pre-flash image already downloaded to the flash memory.
This way it is possible to use the loader commands without having to download the loader first..</p></div>
<div class="paragraph"><p>The desired output format is specified by the --type argument. The assembled
image content and layout is specified by the XML configuration file and the
paths to the files to include are listed in the file list file as plain text
on separate lines.</p></div>
<div class="paragraph"><p>XML configuration file document type definition (DTD):</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;!DOCTYPE target_configuration [
    &lt;!ELEMENT target_configuration (bax:flash_archive?, bax:ram_image?, bax:preflash_image?)&gt;
    &lt;!ELEMENT bax:source           (#PCDATA)&gt;
    &lt;!ELEMENT bax:flash_archive    (bax:entry*)&gt;
    &lt;!ELEMENT bax:ram_image        (bax:entry*)&gt;
    &lt;!ELEMENT bax:preflash_image   (bax:entry*, bax:profile)&gt;
    &lt;!ELEMENT bax:entry            (bax:source, bax:attribute*, bax:skip?)&gt;
    &lt;!ELEMENT bax:attribute        (#PCDATA)&gt;
    &lt;!ELEMENT bax:profile          (#PCDATA)&gt;
    &lt;!ELEMENT bax:skip             EMPTY&gt;

    &lt;!ATTLIST target_configuration xmlns:bax     CDATA #FIXED "TBD"&gt;
    &lt;!ATTLIST bax:entry            name          CDATA #REQUIRED&gt;
    &lt;!ATTLIST bax:entry            type          CDATA #REQUIRED&gt;
    &lt;!ATTLIST bax:attribute        name          CDATA #REQUIRED&gt;
    &lt;!ATTLIST bax:profile          path          CDATA #REQUIRED&gt;
    &lt;!ATTLIST bax:skip             block_size    CDATA #REQUIRED&gt;
    &lt;!ATTLIST bax:skip             block_pattern CDATA #REQUIRED&gt;
]&gt;</tt></pre>
</div></div>
</div>
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>-h, --help</strong>
</dt>
<dd>
<p>
    Show help text.
</p>
</dd>
<dt class="hdlist1">
<strong>-c, --configuration</strong> <em>&lt;configuration file&gt;</em>
</dt>
<dd>
<p>
    Set the XML configuration file to use.
</p>
</dd>
<dt class="hdlist1">
<strong>-t, --type</strong> <em>&lt;output type&gt;</em>
</dt>
<dd>
<p>
    Set the type of software to assemble. Possible values: <strong>flash_archive</strong> | <strong>ram_image</strong> | <strong>preflash_image</strong>
</p>
</dd>
<dt class="hdlist1">
<strong>-l, --file_list</strong> <em>&lt;file list&gt;</em>
</dt>
<dd>
<p>
    Set the file list to use.
</p>
</dd>
<dt class="hdlist1">
<strong>-v, --verbose</strong>
</dt>
<dd>
<p>
    Enable visual output to stdout.
</p>
</dd>
<dt class="hdlist1">
<strong>-f, --force</strong>
</dt>
<dd>
<p>
    Force overwrite if output file already exists.
</p>
</dd>
<dt class="hdlist1">
<strong>-r, --trim_file</strong>
</dt>
<dd>
<p>
     Include Trim Area file in flash archive (manifest.txt will contain record <em>name="cspsa.bin" type="x-steflash/image"</em> instead of <em>name="cspsa.bin" type="x-steflash/initilized-area"</em>)
</p>
</dd>
<dt class="hdlist1">
<strong>--buffer-size</strong> <em>&lt;size&gt;</em>
</dt>
<dd>
<p>
    Set the buffer size to use when creating flash archive (in bytes). Valid suffixes are k and M (e.g. 128k or 1M). Default value is 8k.
</p>
</dd>
<dt class="hdlist1">
<strong>--alignment-size</strong> <em>&lt;size&gt;</em>
</dt>
<dd>
<p>
    Set the alignment size of flash archive entries (in bytes). Default value is 512.
</p>
</dd>
</dl></div>
</div>
<h2 id="_entry_types">Entry types</h2>
<div class="sectionbody">
<div class="tableblock">
<table rules="all"
width="60%"
frame="hsides"
cellspacing="0" cellpadding="4">
<col width="30%" />
<col width="30%" />
<col width="40%" />
<thead>
<tr>
<th align="left" valign="top">Entry type                                     </th>
<th align="left" valign="top">Valid for                              </th>
<th align="left" valign="top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">x-steflash/image</p></td>
<td align="left" valign="top"><p class="table">bax:flash_archive, bax:ram_image</p></td>
<td align="left" valign="top"><p class="table">A plain image that will be transferred to the output file as is.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">x-steflash/bootimage</p></td>
<td align="left" valign="top"><p class="table">bax:flash_archive, bax:ram_image</p></td>
<td align="left" valign="top"><p class="table">An image containing a table of contents. The bootimage will be split into smaller images according to the TOC.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">x-steflash/flasharchive</p></td>
<td align="left" valign="top"><p class="table">bax:preflash_image</p></td>
<td align="left" valign="top"><p class="table">A flasharchive that will be used as input to the preflash tool.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">x-steflash/gdfs</p></td>
<td align="left" valign="top"><p class="table">bax:flash_archive, bax:preflash_image</p></td>
<td align="left" valign="top"><p class="table">A GDFS file that will be added in a binary format (conversion is done by the Assemble Tool) to a flash archive or a GDFS file that will be used as an input to the preflash tool.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">x-steflash/preflashimage</p></td>
<td align="left" valign="top"><p class="table">bax:flash_archive</p></td>
<td align="left" valign="top"><p class="table">The output from a bax:preflash_image target. The preflashimage will be split and converted into binary format before written to the flash archive.</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">x-steflash/crkc</p></td>
<td align="left" valign="top"><p class="table">bax:flash_archive, bax:ram_image</p></td>
<td align="left" valign="top"><p class="table">Customer root key certificate (CRKC) file.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<h2 id="_versioning_information">Versioning information</h2>
<div class="sectionbody">
<div class="paragraph"><p>Assemble tool can parse version information from binary files and put that information to versions.txt file.
Version.txt is then one of entries in flash archive.</p></div>
<div class="paragraph"><p>Following binaries can be parsed: XLOADER, ISSW, MEM_INIT, PWR_MGT, MODEM, IPL.</p></div>
<div class="paragraph"><p>In order to parse version information from binary file, new attribute "VERSION-ID" has to be added to configuration (xml) file for each entry.</p></div>
<div class="paragraph"><p><strong>Example: mem_init</strong></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>    &lt;bax:entry name="mem_init.bin" type="x-steflash/image"&gt;
        &lt;bax:source&gt;mem_init&lt;/bax:source&gt;
        &lt;bax:attribute name="Target"&gt;/flash0/TOC/MEM_INIT, 0x00000000&lt;/bax:attribute&gt;
        &lt;bax:attribute name="TOC-ID"&gt;MEM_INIT&lt;/bax:attribute&gt;
        &lt;bax:attribute name="Enhanced"&gt;TRUE&lt;/bax:attribute&gt;
        &lt;bax:attribute name="VERSION-ID"&gt;MEM_INIT&lt;/bax:attribute&gt;
    &lt;/bax:entry&gt;</tt></pre>
</div></div>
</div>
<h2 id="_enhanced_area_in_user_partition_u5500">Enhanced Area in User Partition (U5500)</h2>
<div class="sectionbody">
<div class="paragraph"><p>eMMC allows one area in User Data Area to be defined as enhanced area which will have better reliability.
In order to mark binary which should be placed in enhanced area , new attribute "Enhanced" has to be added to configuration (xml) file for each entry.</p></div>
<div class="paragraph"><p><strong>Example: cspsa.bin</strong></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>    &lt;bax:entry name="cspsa.bin" type="x-steflash/initilized-area"&gt;
      &lt;bax:source&gt;cspsa.bin&lt;/bax:source&gt;
      &lt;bax:attribute name="Target"&gt;/flash0/TOC/CSPSA0, 0x00000000 &lt;/bax:attribute&gt;
      &lt;bax:attribute name="Enhanced"&gt;TRUE&lt;/bax:attribute&gt;
      &lt;bax:attribute name="TOC-ID"&gt;CSPSA0&lt;/bax:attribute&gt;
    &lt;/bax:entry&gt;</tt></pre>
</div></div>
</div>
<h2 id="_generic_debug_and_test_certificate_dnt_cert_file">Generic Debug And Test Certificate (DNT-CERT) File</h2>
<div class="sectionbody">
<div class="paragraph"><p>Entry for generic debug and test certificate (DNT-CERT) in XML configuration file has the following format:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;bax:entry name="dntcert.ssw" type="x-steflash/image"&gt;
        &lt;bax:source&gt;dntcert&lt;/bax:source&gt;
        &lt;bax:attribute name="Target"&gt;/flash0/boot0/DNT-CERT, 0x00000000&lt;/bax:attribute&gt;
        &lt;bax:attribute name="TOC-ID"&gt;DNT-CERT&lt;/bax:attribute&gt;
&lt;/bax:entry&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>Entry for generic debug and test certificate (DNT-CERT) in TXT File list file:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>dntcert=/path/to/dntcert.ssw
# This is a comment</tt></pre>
</div></div>
</div>
<h2 id="_ste_debug_and_test_certificate_ste_dnt_cert_file_for_customer_separation">STE Debug And Test Certificate (STE-DNT-CERT) File for customer separation</h2>
<div class="sectionbody">
<div class="paragraph"><p>Entry for STE debug and test certificate (STE-DNT-CERT) in XML configuration file has the following format:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;bax:entry name="stedntcert.ssw" type="x-steflash/image"&gt;
        &lt;bax:source&gt;stedntcert&lt;/bax:source&gt;
        &lt;bax:attribute name="Target"&gt;/flash0/boot0/DNT-CERT, 0x00000000&lt;/bax:attribute&gt;
        &lt;bax:attribute name="TOC-ID"&gt;STE-DNT-CERT&lt;/bax:attribute&gt;
&lt;/bax:entry&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>Entry for STE debug and test certificate (STE-DNT-CERT) in TXT File list file:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>stedntcert=/path/to/stedntcert.ssw
# This is a comment</tt></pre>
</div></div>
</div>
<h2 id="_customer_root_key_certificate_crkc_file">Customer Root Key Certificate (CRKC) File</h2>
<div class="sectionbody">
<div class="paragraph"><p>Entry for customer root key certificate (CRKC) in XML configuration file has the following format:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;bax:entry name="crkc.bin" type="x-steflash/crkc"&gt;
  &lt;bax:source&gt;crkc&lt;/bax:source&gt;
  &lt;bax:attribute name="Target"&gt; target area &lt;/bax:attribute&gt;
  &lt;bax:attribute name="TOC-ID"&gt;CRKC&lt;/bax:attribute&gt;
&lt;/bax:entry&gt;</tt></pre>
</div></div>
</div>
<h2 id="_adding_gdfs_files_in_a_binary_format_to_a_flash_archive">Adding GDFS Files in a Binary Format to a Flash Archive</h2>
<div class="sectionbody">
<div class="paragraph"><p>Entry with the type <strong>x-steflash/gdfs</strong> in XML configuration file for assembling
flash archive represents a GDFS file that will be converted by Assemble Tool to
a binary format before being added to a flash archive.</p></div>
<div class="paragraph"><p>Example:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;bax:entry name="gdfs.bin" type="x-steflash/gdfs"&gt;
  &lt;bax:source&gt;gdfs.gdf&lt;/bax:source&gt;
  &lt;bax:attribute name="Target"&gt; target area &lt;/bax:attribute&gt;
&lt;/bax:entry&gt;</tt></pre>
</div></div>
</div>
<h2 id="_minimizing_journaling_flash_file_system_jffs_image_files">Minimizing Journaling Flash File System (JFFS) Image Files</h2>
<div class="sectionbody">
<div class="paragraph"><p>Journaling Flash File System (JFFS) image files can be minimized when stored in flash archive.
Minimized image file is created by skipping unused (empty) blocks of data when writing file to flash archive.
This results in smaller flash archive size.
Block skipping is configured for particular file by its <strong>bax:entry</strong> element in XML configuration file.
Entry element must contain element <strong>bax:skip</strong> to enable skipping:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;bax:skip block_size="number in hexadecimal format" block_pattern="number in hexadecimal format"/&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>Attribute <strong>block_size</strong> specifies size of the block and attribute <strong>block_pattern</strong> specifies
pattern of bytes contained in the block to be skipped.
Image file is read as a series of blocks having specified size and if such block contains
specified pattern of bytes then it is skipped.</p></div>
<div class="paragraph"><p>Example of the XML configuration file entry for minimized JFFS image file:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;bax:entry name="ramdisk.img" type="x-steflash/image"&gt;
  &lt;bax:source&gt;ramdisk.img&lt;/bax:source&gt;
  &lt;bax:attribute name="Target"&gt;/flash0/TOC/ROOTFS, 0x00000000 &lt;/bax:attribute&gt;
  &lt;bax:attribute name="TOC-ID"&gt;ROOTFS&lt;/bax:attribute&gt;
  &lt;bax:skip block_size="0x800" block_pattern="0xFF"&gt;/
&lt;/bax:entry&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>In the example above, where size of the block is 2048 bytes (0x800 in hexadecimal number format),
every block that is filled with byte value 255 (0xFF in hexadecimal number format) is going to be skipped.</p></div>
</div>
<h2 id="_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph"><p>Configuration files:</p></div>
<div class="paragraph"><p><strong>flash archive</strong></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;target_configuration&gt;
        &lt;bax:flash_archive&gt;
                &lt;bax:entry name="boot_image" type="x-steflash/bootimage"&gt;
                        &lt;bax:source&gt;boot_image.bin&lt;/bax:source&gt;
                        &lt;bax:attribute name="Target"&gt;/flash0/boot0, 0x00000000&lt;/bax:attribute&gt;
                &lt;/bax:entry&gt;
                &lt;bax:entry name="normal" type="x-steflash/image"&gt;
                        &lt;bax:source&gt;normal.bin&lt;/bax:source&gt;
                        &lt;bax:attribute name="Target"&gt;/flash0, 0x00080800&lt;/bax:attribute&gt;
                        &lt;bax:attribute name="TOC-ID"&gt;NORMAL&lt;/bax:attribute&gt;
                        &lt;bax:attribute name="TOC-LoadAddress"&gt;0x10203040&lt;/bax:attribute&gt;
                        &lt;bax:attribute name="TOC-EntryPoint"&gt;0x00000000&lt;/bax:attribute&gt;
                &lt;/bax:entry&gt;
        &lt;/bax:flash_archive&gt;
&lt;/target_configuration&gt;</tt></pre>
</div></div>
<div class="paragraph"><p><strong>ram image</strong></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;target_configuration&gt;
        &lt;bax:ram_image&gt;
                &lt;bax:entry name="boot_image" type="x-steflash/bootimage"&gt;
                        &lt;bax:source&gt;boot_image.bin&lt;/bax:source&gt;
                &lt;/bax:entry&gt;
                &lt;bax:entry name="normal" type="x-steflash/image"&gt;
                        &lt;bax:source&gt;normal.bin&lt;/bax:source&gt;
                        &lt;bax:attribute name="TOC-ID"&gt;NORMAL&lt;/bax:attribute&gt;
                        &lt;bax:attribute name="TOC-LoadAddress"&gt;0x10203040&lt;/bax:attribute&gt;
                        &lt;bax:attribute name="TOC-EntryPoint"&gt;0x00000000&lt;/bax:attribute&gt;
                        &lt;bax:attribute name="Enhanced"&gt;TRUE&lt;/bax:attribute&gt;
                &lt;/bax:entry&gt;
        &lt;/bax:ram_image&gt;
&lt;/target_configuration&gt;</tt></pre>
</div></div>
<div class="paragraph"><p><strong>preflash image</strong></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;target_configuration&gt;
        &lt;bax:preflash_image&gt;
                &lt;bax:entry name="preflash" type="x-steflash/flasharchive"&gt;
                        &lt;bax:source&gt;flasharchive.zip&lt;/bax:source&gt;
                &lt;/bax:entry&gt;
                &lt;!--bax:entry name="gdfs" type="x-steflash/gdfs"&gt;
                        &lt;bax:source&gt;GDFS&lt;/bax:source&gt;
                &lt;/bax:entry--&gt;
                &lt;bax:profile path="path/to/profile-STE_DB8500_flashloader.mesp" /&gt;
        &lt;/bax:preflash_image&gt;
&lt;/target_configuration&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>Note that the selected profile must have an entry that specifies the path to the preflash tool:
<strong>PreFlashTool Windows="C:\path\to\preflash_tool.exe" Linux="/path/to/preflash_tool"</strong><br /></p></div>
<div class="paragraph"><p><strong>preflash archive</strong></p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;target_configuration&gt;
        &lt;bax:flash_archive&gt;
                &lt;bax:entry name="preflash.bin" type="x-steflash/preflashimage"&gt;
                        &lt;bax:source&gt;preflash.a01&lt;/bax:source&gt;
                &lt;/bax:entry&gt;
        &lt;/bax:flash_archive&gt;
&lt;/target_configuration&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>File list file:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>BOOT_IMAGE=/path/to/boot_image.bin
NORMAL=/path/to/normal
# This is a comment</tt></pre>
</div></div>
<div class="paragraph"><p>Then the configuration file &lt;bax:source&gt; XML element can specify this alias instead of a filename:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>  ...
        &lt;bax:entry name="boot_image" type="x-steflash/bootimage"&gt;
                &lt;bax:source&gt;BOOT_IMAGE&lt;/bax:source&gt;
                &lt;bax:attribute name="Target"&gt;/flash0/boot0, 0x00000000&lt;/bax:attribute&gt;
        &lt;/bax:entry&gt;
  ...</tt></pre>
</div></div>
<div class="paragraph"><p>Using the * and ? wildcards in the file list file:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>#Pattern below will match xyz_modem_1.2.3.bin but NOT xyz_modem_1.2.bin in the directory /path/to/
MODEM=/path/to/*_modem_?.?.?.bin
#Pattern below will match all file names in /path/to/ that contains "issw"
/path/to/*issw*</tt></pre>
</div></div>
<div class="paragraph"><p>Assembling a flash archive:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>assemble-tool -t flash_archive -c /path/to/config.xml -l /path/to/filelist.txt /path/to/flasharchive.zip</tt></pre>
</div></div>
<div class="paragraph"><p>Assembling a RAM image:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>assemble-tool -t ram_image -c /path/to/config.xml -l /path/to/file_list.txt /path/to/ram_image.bin</tt></pre>
</div></div>
<div class="paragraph"><p>Assembling a preflash image image:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>assemble-tool -t preflash_image -c /path/to/config.xml -l /path/to/file_list.txt /path/to/preflash_image.bin</tt></pre>
</div></div>
</div>
<h2 id="_exit_status">EXIT STATUS</h2>
<div class="sectionbody">
<div class="paragraph"><p>assemble-tool returns a zero exit status if it succeeds during assembling.
A non zero is returned in case of failure.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>0</strong>
</dt>
<dd>
<p>
    Success
</p>
</dd>
<dt class="hdlist1">
<strong>1</strong>
</dt>
<dd>
<p>
    Unknown error
</p>
</dd>
</dl></div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-02-03 11:18:15 CEST
</div>
</div>
</body>
</html>
